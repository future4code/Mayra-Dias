{"ast":null,"code":"import _createForOfIteratorHelper from\"C:\\\\Users\\\\Mariana\\\\Desktop\\\\Mayra-Dias\\\\modulo6\\\\promobit\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createForOfIteratorHelper.js\";import _asyncToGenerator from\"C:\\\\Users\\\\Mariana\\\\Desktop\\\\Mayra-Dias\\\\modulo6\\\\promobit\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\Mariana\\\\Desktop\\\\Mayra-Dias\\\\modulo6\\\\promobit\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Mariana\\\\Desktop\\\\Mayra-Dias\\\\modulo6\\\\promobit\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Container,Content,MovieCover,MovieDetail,TitleMovie,InfoMovie,Assessment,ImageAssessment,Synopsis,TextSynopsis,PeopleMovieContainer,PeopleMovieContent,TitlePeople,InfoPeople,ContentMidia,CastTitle,CastContainer,CastCard,NameCast,NameCharacter,TrailerTitle,MovieTrailer,RecommendationsTitle,MovieRecommendationsContainer}from\"./styles\";import{useEffect,useState}from\"react\";import{api}from\"../../services/api\";import{Link,useParams}from\"react-router-dom\";import{CardMovie}from\"../../components/CardMovie\";import{CircularProgressbar,buildStyles}from'react-circular-progressbar';import{getYear,format}from\"date-fns\";import'react-circular-progressbar/dist/styles.css';import ReactPlayer from'react-player/youtube';import imgNotFound from'../../assets/notfound.png';import imgVideoNotFound from'../../assets/videonotfound.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export function MovieDetails(props){var _useParams=useParams(),id=_useParams.id;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movieDetails=_useState2[0],setMovieDetails=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),movieCurrent=_useState4[0],setMovieCurrent=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),movieRecommendations=_useState6[0],setMovieRecommendations=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),realeseDate=_useState8[0],setRealeaseDate=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),castInfo=_useState10[0],setCastInfo=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),crewInfo=_useState12[0],setCrewInfo=_useState12[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.get(\"movie/\".concat(id,\"?api_key=ca4b9689443e16a5eaca9c48c71bed7e&append_to_response=videos&language=pt-BR\")).then(function(response){return setMovieDetails(response.data);});case 3:_context.next=5;return api.get(\"movie/\".concat(id,\"/release_dates?api_key=ca4b9689443e16a5eaca9c48c71bed7e\")).then(function(response){var data=response.data.results;var _iterator=_createForOfIteratorHelper(data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var obj=_step.value;if(obj.iso_3166_1==\"BR\"){// console.log(obj)\nsetRealeaseDate(obj);break;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}});case 5:_context.next=7;return api.get(\"movie/\".concat(id,\"/credits?api_key=ca4b9689443e16a5eaca9c48c71bed7e&language=pt-BR\")).then(function(response){return setCastInfo(response.data.cast);});case 7:_context.next=9;return api.get(\"movie/\".concat(id,\"/credits?api_key=ca4b9689443e16a5eaca9c48c71bed7e&language=pt-BR\")).then(function(response){var data=response.data.crew;var filteredData=[];var _iterator2=_createForOfIteratorHelper(data),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var obj=_step2.value;if([\"Characters\",\"Director\",\"Writer\"].includes(obj.job)){filteredData.push(obj);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}setCrewInfo(filteredData);});case 9:_context.next=11;return api.get(\"movie/\".concat(id,\"/recommendations?api_key=ca4b9689443e16a5eaca9c48c71bed7e&language=en-US&page=1\")).then(function(response){return setMovieRecommendations(response.data.results);});case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);})),[movieCurrent]);var title=movieDetails.title,poster_path=movieDetails.poster_path,vote_average=movieDetails.vote_average,release_date=movieDetails.release_date,runtime=movieDetails.runtime,genres=movieDetails.genres,videos=movieDetails.videos;var dateFormated=release_date?format(new Date(release_date),\"dd/MM/yyyy\"):\"\";var year=release_date?getYear(new Date(release_date)):\"\";var movieHour=runtime?Math.floor(runtime/60):\"\";var movieMin=runtime?runtime%60:\"\";return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Content,{children:[/*#__PURE__*/_jsx(MovieCover,{src:\"https://image.tmdb.org/t/p/original/\".concat(poster_path),alt:title}),/*#__PURE__*/_jsxs(MovieDetail,{children:[/*#__PURE__*/_jsxs(TitleMovie,{children:[title,\" (\",year,\")\"]}),/*#__PURE__*/_jsxs(InfoMovie,{children:[realeseDate&&realeseDate.iso_3166_1?realeseDate.release_dates[0].certification:\"\",\" anos *\",dateFormated,\" *  (BR)  *\",genres?genres.map(function(genre,index){return\" \".concat(genre.name).concat(index+1===genres.length?\" \":\", \");}):\"\",\"*\",movieHour,\"h \",movieMin,\"m\"]}),/*#__PURE__*/_jsxs(Assessment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{width:65,height:65},children:/*#__PURE__*/_jsx(CircularProgressbar,{value:vote_average/100,maxValue:1,text:\"\".concat(vote_average*10,\"%\"),styles:buildStyles({pathColor:'#FFF',textColor:'#14FF00',trailColor:'#14FF00',backgroundColor:'#14FF00'})})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Avalia\\xE7\\xE3o dos \",/*#__PURE__*/_jsx(\"br\",{}),\" usu\\xE1rios\"]})]}),/*#__PURE__*/_jsx(Synopsis,{children:\"Sinopse\"}),/*#__PURE__*/_jsx(TextSynopsis,{children:movieDetails?movieDetails.overview:\"Não encontrado\"}),/*#__PURE__*/_jsx(PeopleMovieContainer,{children:crewInfo.map(function(crew){return/*#__PURE__*/_jsxs(PeopleMovieContent,{children:[/*#__PURE__*/_jsx(TitlePeople,{children:crew.name}),/*#__PURE__*/_jsx(InfoPeople,{children:crew.job})]},crew.id);})})]})]}),/*#__PURE__*/_jsxs(ContentMidia,{children:[/*#__PURE__*/_jsx(CastTitle,{children:\"Elenco original\"}),/*#__PURE__*/_jsx(CastContainer,{children:castInfo.map(function(cast){return/*#__PURE__*/_jsxs(CastCard,{children:[/*#__PURE__*/_jsx(\"img\",{src:cast.profile_path===null?imgNotFound:\"https://image.tmdb.org/t/p/original/\".concat(cast.profile_path),alt:cast.name}),/*#__PURE__*/_jsx(NameCast,{children:cast.name}),/*#__PURE__*/_jsx(NameCharacter,{children:cast.character})]},cast.id);})}),/*#__PURE__*/_jsx(TrailerTitle,{children:\"Trailer\"}),/*#__PURE__*/_jsx(MovieTrailer,{children:videos&&videos.results.length?/*#__PURE__*/_jsx(ReactPlayer,{width:\"100%\",height:\"100%\",url:\"https://www.youtube.com/watch?v=\".concat(videos?videos.results[0].key:\"\"),controls:true}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"img\",{src:imgVideoNotFound})})}),/*#__PURE__*/_jsx(RecommendationsTitle,{children:\"Recomenda\\xE7\\xF5es\"}),/*#__PURE__*/_jsx(MovieRecommendationsContainer,{children:movieRecommendations.map(function(movie){return/*#__PURE__*/_jsx(Link,{style:{textDecoration:'none'},onClick:function onClick(){return setMovieCurrent(movie.id);},to:\"/moviedetails/\".concat(movie.id),children:/*#__PURE__*/_jsx(CardMovie,{title:movie.title,imagePath:movie.poster_path,dateRelease:movie.release_date})},movie.id);})})]})]});}","map":{"version":3,"sources":["C:/Users/Mariana/Desktop/Mayra-Dias/modulo6/promobit/src/pages/MovieDetails/index.js"],"names":["Container","Content","MovieCover","MovieDetail","TitleMovie","InfoMovie","Assessment","ImageAssessment","Synopsis","TextSynopsis","PeopleMovieContainer","PeopleMovieContent","TitlePeople","InfoPeople","ContentMidia","CastTitle","CastContainer","CastCard","NameCast","NameCharacter","TrailerTitle","MovieTrailer","RecommendationsTitle","MovieRecommendationsContainer","useEffect","useState","api","Link","useParams","CardMovie","CircularProgressbar","buildStyles","getYear","format","ReactPlayer","imgNotFound","imgVideoNotFound","MovieDetails","props","id","movieDetails","setMovieDetails","movieCurrent","setMovieCurrent","movieRecommendations","setMovieRecommendations","realeseDate","setRealeaseDate","castInfo","setCastInfo","crewInfo","setCrewInfo","get","then","response","data","results","obj","iso_3166_1","cast","crew","filteredData","includes","job","push","console","log","title","poster_path","vote_average","release_date","runtime","genres","videos","dateFormated","Date","year","movieHour","Math","floor","movieMin","release_dates","certification","map","genre","index","name","length","width","height","pathColor","textColor","trailColor","backgroundColor","overview","profile_path","character","key","movie","textDecoration"],"mappings":"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","sourcesContent":["import { \r\n    Container,\r\n    Content,\r\n    MovieCover,\r\n    MovieDetail,\r\n    TitleMovie,\r\n    InfoMovie,\r\n    Assessment,\r\n    ImageAssessment,\r\n    Synopsis,\r\n    TextSynopsis, \r\n    PeopleMovieContainer,\r\n    PeopleMovieContent,\r\n    TitlePeople,\r\n    InfoPeople,\r\n    ContentMidia,\r\n    CastTitle,\r\n    CastContainer,\r\n    CastCard,\r\n    NameCast,\r\n    NameCharacter,\r\n    TrailerTitle,\r\n    MovieTrailer,\r\n    RecommendationsTitle,\r\n    MovieRecommendationsContainer,\r\n} from \"./styles\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { api } from \"../../services/api\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\n\r\nimport { CardMovie } from \"../../components/CardMovie\";\r\nimport { CircularProgressbar,buildStyles } from 'react-circular-progressbar';\r\nimport { getYear,format } from \"date-fns\";\r\n\r\nimport 'react-circular-progressbar/dist/styles.css';\r\nimport ReactPlayer from 'react-player/youtube';\r\n\r\nimport imgNotFound from '../../assets/notfound.png';\r\nimport imgVideoNotFound from '../../assets/videonotfound.png';\r\n\r\nexport function MovieDetails(props) {\r\n    const { id }  = useParams();    \r\n    const [movieDetails, setMovieDetails] = useState([]);\r\n    const [movieCurrent, setMovieCurrent] = useState([]);\r\n    const [movieRecommendations, setMovieRecommendations] = useState([]);\r\n    const [realeseDate,setRealeaseDate] = useState({});\r\n    const [castInfo, setCastInfo] = useState([]);\r\n    const [crewInfo, setCrewInfo] = useState([]);\r\n    \r\n    useEffect(async () => {\r\n        try {\r\n            await api.get(`movie/${id}?api_key=ca4b9689443e16a5eaca9c48c71bed7e&append_to_response=videos&language=pt-BR`)\r\n            .then(response => setMovieDetails((response.data)))\r\n            \r\n            await api.get(`movie/${id}/release_dates?api_key=ca4b9689443e16a5eaca9c48c71bed7e`)\r\n            .then(response => {\r\n                const data = response.data.results;\r\n                \r\n                for(let obj of data) {\r\n                    if (obj.iso_3166_1 == \"BR\") {\r\n                        // console.log(obj)\r\n                        setRealeaseDate(obj)\r\n                        break\r\n                    }\r\n                }\r\n            })\r\n            \r\n            await api.get(`movie/${id}/credits?api_key=ca4b9689443e16a5eaca9c48c71bed7e&language=pt-BR`)\r\n            .then(response => setCastInfo(response.data.cast))\r\n\r\n            await api.get(`movie/${id}/credits?api_key=ca4b9689443e16a5eaca9c48c71bed7e&language=pt-BR`)\r\n            .then(response => {\r\n                const data = response.data.crew\r\n                let filteredData = [];\r\n\r\n                for(let obj of data) {\r\n                    if ([\"Characters\",\"Director\",\"Writer\"].includes(obj.job)) {\r\n                        filteredData.push(obj);\r\n                    }\r\n                }\r\n                setCrewInfo(filteredData);\r\n            })\r\n\r\n            await api.get(`movie/${id}/recommendations?api_key=ca4b9689443e16a5eaca9c48c71bed7e&language=en-US&page=1`)\r\n            .then(response => setMovieRecommendations(response.data.results))\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n            \r\n    }, [movieCurrent]);\r\n    \r\n    const {title,poster_path,vote_average,release_date,runtime ,genres, videos} = movieDetails;\r\n\r\n    const dateFormated = release_date ? format(new Date(release_date), \"dd/MM/yyyy\") : \"\";\r\n    const year = release_date ? getYear(new Date(release_date)): \"\";\r\n    const movieHour = runtime ? Math.floor(runtime/60) : \"\";\r\n    const movieMin = runtime ? runtime % 60 : \"\";\r\n\r\n    return (\r\n        <Container>\r\n            <Content>\r\n            <MovieCover src={`https://image.tmdb.org/t/p/original/${poster_path}`} alt={title} />\r\n            <MovieDetail>\r\n                <TitleMovie>{title} ({year})</TitleMovie>\r\n                <InfoMovie> \r\n                    {realeseDate && realeseDate.iso_3166_1 ? realeseDate.release_dates[0].certification : \"\"} anos \r\n                    * \r\n                    {dateFormated} *  (BR)  * \r\n                    {genres ? genres.map((genre, index) => (` ${genre.name}${index + 1 === genres.length ? \" \" : \", \"}`)): \"\"}* \r\n                    {movieHour}h {movieMin}m\r\n                </InfoMovie>\r\n                <Assessment>\r\n                    <div style={{ width: 65, height: 65 }}>\r\n                        <CircularProgressbar \r\n                            value={vote_average / 100} \r\n                            maxValue={1} \r\n                            text={`${vote_average * 10}%`} \r\n                            styles={buildStyles({\r\n                                pathColor: '#FFF',\r\n                                textColor: '#14FF00',\r\n                                trailColor: '#14FF00',\r\n                                backgroundColor: '#14FF00',\r\n                            })}\r\n                        \r\n                        />   \r\n                    </div>\r\n                    <p>Avaliação dos <br /> usuários</p>\r\n                </Assessment>\r\n            \r\n                <Synopsis>Sinopse</Synopsis>\r\n                <TextSynopsis>{movieDetails ? movieDetails.overview : \"Não encontrado\"}</TextSynopsis>\r\n            \r\n                    <PeopleMovieContainer>\r\n                        {\r\n                            crewInfo.map(crew => (\r\n                                <PeopleMovieContent key={crew.id}>\r\n                                    <TitlePeople>{crew.name}</TitlePeople>\r\n                                    <InfoPeople>{crew.job}</InfoPeople>\r\n                                </PeopleMovieContent>\r\n                            ))\r\n                        }\r\n\r\n                    </PeopleMovieContainer>\r\n\r\n            </MovieDetail> \r\n            </Content>\r\n            <ContentMidia>\r\n            <CastTitle>Elenco original</CastTitle>   \r\n            <CastContainer>\r\n                {\r\n                    castInfo.map(cast => (\r\n                        <CastCard key={cast.id}>\r\n                        <img src={cast.profile_path === null ? imgNotFound : `https://image.tmdb.org/t/p/original/${cast.profile_path}`} alt={cast.name} />\r\n                        <NameCast>{cast.name}</NameCast>\r\n                        <NameCharacter>{cast.character}</NameCharacter>\r\n                        </CastCard>\r\n                    ))\r\n                }\r\n            </CastContainer>\r\n            <TrailerTitle>\r\n                Trailer\r\n            </TrailerTitle>\r\n\r\n            <MovieTrailer>\r\n                {videos && videos.results.length ? (\r\n                    <ReactPlayer width='100%' height='100%' url={`https://www.youtube.com/watch?v=${videos ? videos.results[0].key : \"\"}`} controls={true} />\r\n                ) : (\r\n                    <>\r\n                        <img src={imgVideoNotFound} />\r\n                    </>\r\n                )}\r\n            </MovieTrailer>\r\n\r\n            <RecommendationsTitle>Recomendações</RecommendationsTitle>\r\n            <MovieRecommendationsContainer>\r\n               {\r\n                    movieRecommendations.map(movie => (\r\n                    <Link style={{textDecoration:'none'}} onClick={() => setMovieCurrent(movie.id)} key={movie.id} to={`/moviedetails/${movie.id}`}>\r\n                        <CardMovie \r\n                            title={movie.title} \r\n                            imagePath={movie.poster_path} \r\n                            dateRelease={movie.release_date} \r\n                        >\r\n                        </CardMovie>\r\n                    </Link>\r\n                    ))\r\n               }\r\n            </MovieRecommendationsContainer>\r\n            </ContentMidia>\r\n        </Container>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}