{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\Mariana\\\\Desktop\\\\Mayra-Dias\\\\modulo6\\\\promobit\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\toConsumableArray.js\";import _createForOfIteratorHelper from\"C:\\\\Users\\\\Mariana\\\\Desktop\\\\Mayra-Dias\\\\modulo6\\\\promobit\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createForOfIteratorHelper.js\";import _slicedToArray from\"C:\\\\Users\\\\Mariana\\\\Desktop\\\\Mayra-Dias\\\\modulo6\\\\promobit\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import{createContext,useEffect,useState}from\"react\";import{api}from'../services/api';import{jsx as _jsx}from\"react/jsx-runtime\";export var MoviesContext=/*#__PURE__*/createContext([]);export function MoviesProvider(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),genres=_useState4[0],setGenres=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),filters=_useState6[0],setFilters=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),filteredMovies=_useState8[0],setFilteredMovies=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),page=_useState10[0],setPage=_useState10[1];useEffect(function(){try{api.get(\"movie/popular?api_key=ca4b9689443e16a5eaca9c48c71bed7e&language=pt-BR&page=\".concat(page)).then(function(response){return setMovies(response.data.results);});api.get('genre/movie/list?api_key=ca4b9689443e16a5eaca9c48c71bed7e&language=pt-BR').then(function(response){return setGenres(response.data.genres);});// console.log(movies);\n}catch(error){console.log(error);}},[page]);useEffect(function(){try{var _filteredMovies=[];movies.map(function(movie){var _iterator=_createForOfIteratorHelper(filters),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var filter=_step.value;if(movie.genre_ids.includes(filter)){_filteredMovies=[].concat(_toConsumableArray(_filteredMovies),[movie]);break;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}});setFilteredMovies(_filteredMovies);// console.log(filteredMovies);\n}catch(error){console.log(error);}},[filters]);function handleFilterGenres(genre){if(filters.includes(genre)){var index=filters.indexOf(genre);if(index==0){setFilters(_toConsumableArray(filters.slice(index+1)));}else{setFilters([].concat(_toConsumableArray(filters.slice(0,index)),_toConsumableArray(filters.slice(index+1))));}}else{setFilters([].concat(_toConsumableArray(filters),[genre]));}// console.log(filters);\n}return/*#__PURE__*/_jsx(MoviesContext.Provider,{value:{genres:genres,movies:movies,filters:filters,filteredMovies:filteredMovies,setPage:setPage,handleFilterGenres:handleFilterGenres},children:props.children});}","map":{"version":3,"sources":["C:/Users/Mariana/Desktop/Mayra-Dias/modulo6/promobit/src/hooks/MoviesContext.js"],"names":["createContext","useEffect","useState","api","MoviesContext","MoviesProvider","props","movies","setMovies","genres","setGenres","filters","setFilters","filteredMovies","setFilteredMovies","page","setPage","get","then","response","data","results","error","console","log","map","movie","filter","genre_ids","includes","handleFilterGenres","genre","index","indexOf","slice","children"],"mappings":"keAAA,OAASA,aAAT,CAAwBC,SAAxB,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,OAASC,GAAT,KAAoB,iBAApB,C,2CAEA,MAAO,IAAMC,CAAAA,aAAa,cAAGJ,aAAa,CAAC,EAAD,CAAnC,CAEP,MAAO,SAASK,CAAAA,cAAT,CAAwBC,KAAxB,CAA+B,CAClC,cAA4BJ,QAAQ,CAAC,EAAD,CAApC,wCAAOK,MAAP,eAAeC,SAAf,eACA,eAA4BN,QAAQ,CAAC,EAAD,CAApC,yCAAOO,MAAP,eAAeC,SAAf,eACA,eAA8BR,QAAQ,CAAC,EAAD,CAAtC,yCAAOS,OAAP,eAAgBC,UAAhB,eACA,eAA4CV,QAAQ,CAAC,EAAD,CAApD,yCAAOW,cAAP,eAAuBC,iBAAvB,eAEA,eAAwBZ,QAAQ,CAAC,CAAD,CAAhC,0CAAOa,IAAP,gBAAaC,OAAb,gBAEAf,SAAS,CAAC,UAAM,CACZ,GAAI,CACAE,GAAG,CAACc,GAAJ,sFAAsFF,IAAtF,GACCG,IADD,CACM,SAAAC,QAAQ,QAAIX,CAAAA,SAAS,CAACW,QAAQ,CAACC,IAAT,CAAcC,OAAf,CAAb,EADd,EAGAlB,GAAG,CAACc,GAAJ,CAAQ,0EAAR,EACCC,IADD,CACM,SAAAC,QAAQ,QAAIT,CAAAA,SAAS,CAACS,QAAQ,CAACC,IAAT,CAAcX,MAAf,CAAb,EADd,EAEA;AACH,CAAC,MAAOa,KAAP,CAAc,CACZC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,CAEJ,CAZQ,CAYN,CAACP,IAAD,CAZM,CAAT,CAcAd,SAAS,CAAC,UAAM,CACZ,GAAI,CACA,GAAIY,CAAAA,eAAc,CAAG,EAArB,CAEAN,MAAM,CAACkB,GAAP,CAAW,SAAAC,KAAK,CAAI,0CACEf,OADF,YAChB,+CAA2B,IAAnBgB,CAAAA,MAAmB,aACvB,GAAID,KAAK,CAACE,SAAN,CAAgBC,QAAhB,CAAyBF,MAAzB,CAAJ,CAAsC,CAClCd,eAAc,8BAAOA,eAAP,GAAwBa,KAAxB,EAAd,CACA,MACH,CACJ,CANe,qDAOnB,CAPD,EAQAZ,iBAAiB,CAACD,eAAD,CAAjB,CACA;AACH,CAAC,MAAOS,KAAP,CAAc,CACZC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,CAEJ,CAlBQ,CAkBN,CAACX,OAAD,CAlBM,CAAT,CAoBA,QAASmB,CAAAA,kBAAT,CAA4BC,KAA5B,CAAmC,CAChC,GAAIpB,OAAO,CAACkB,QAAR,CAAiBE,KAAjB,CAAJ,CAA4B,CACvB,GAAMC,CAAAA,KAAK,CAAGrB,OAAO,CAACsB,OAAR,CAAgBF,KAAhB,CAAd,CAEA,GAAIC,KAAK,EAAI,CAAb,CAAgB,CACZpB,UAAU,oBAAKD,OAAO,CAACuB,KAAR,CAAcF,KAAK,CAAG,CAAtB,CAAL,EAAV,CACH,CAFD,IAEO,CACHpB,UAAU,8BAAKD,OAAO,CAACuB,KAAR,CAAc,CAAd,CAAiBF,KAAjB,CAAL,qBAAiCrB,OAAO,CAACuB,KAAR,CAAcF,KAAK,CAAG,CAAtB,CAAjC,GAAV,CACH,CACJ,CARF,IAQQ,CACHpB,UAAU,8BAAKD,OAAL,GAAcoB,KAAd,GAAV,CACH,CACD;AACH,CAED,mBACI,KAAC,aAAD,CAAe,QAAf,EACI,KAAK,CAAE,CACHtB,MAAM,CAANA,MADG,CAEHF,MAAM,CAANA,MAFG,CAGHI,OAAO,CAAPA,OAHG,CAIHE,cAAc,CAAdA,cAJG,CAKHG,OAAO,CAAPA,OALG,CAMHc,kBAAkB,CAAlBA,kBANG,CADX,UAUKxB,KAAK,CAAC6B,QAVX,EADJ,CAcH","sourcesContent":["import { createContext, useEffect, useState } from \"react\"\r\nimport { api } from '../services/api';\r\n\r\nexport const MoviesContext = createContext([]);\r\n\r\nexport function MoviesProvider(props) {\r\n    const [movies, setMovies] = useState([]);\r\n    const [genres, setGenres] = useState([]);\r\n    const [filters, setFilters] = useState([]);\r\n    const [filteredMovies, setFilteredMovies] = useState([]);\r\n\r\n    const [page, setPage] = useState(1);\r\n\r\n    useEffect(() => {\r\n        try {\r\n            api.get(`movie/popular?api_key=ca4b9689443e16a5eaca9c48c71bed7e&language=pt-BR&page=${page}`)\r\n            .then(response => setMovies(response.data.results))\r\n        \r\n            api.get('genre/movie/list?api_key=ca4b9689443e16a5eaca9c48c71bed7e&language=pt-BR')\r\n            .then(response => setGenres(response.data.genres)); \r\n            // console.log(movies);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        \r\n    }, [page]);\r\n\r\n    useEffect(() => {\r\n        try {\r\n            let filteredMovies = [];\r\n\r\n            movies.map(movie => {\r\n                for(let filter of filters) {\r\n                    if (movie.genre_ids.includes(filter)) {\r\n                        filteredMovies = [...filteredMovies , movie];\r\n                        break\r\n                    }\r\n                }\r\n            })\r\n            setFilteredMovies(filteredMovies);\r\n            // console.log(filteredMovies);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        \r\n    }, [filters]);\r\n\r\n    function handleFilterGenres(genre) {\r\n       if (filters.includes(genre)){\r\n            const index = filters.indexOf(genre);\r\n\r\n            if (index == 0) {\r\n                setFilters([...filters.slice(index + 1)]);\r\n            } else {\r\n                setFilters([...filters.slice(0, index), ...filters.slice(index + 1)])\r\n            }\r\n        } else {\r\n            setFilters([...filters, genre])\r\n        }    \r\n        // console.log(filters);\r\n    }\r\n\r\n    return (\r\n        <MoviesContext.Provider\r\n            value={{\r\n                genres,\r\n                movies,\r\n                filters,\r\n                filteredMovies,\r\n                setPage,\r\n                handleFilterGenres\r\n            }}\r\n        >\r\n            {props.children}\r\n        </MoviesContext.Provider>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}